class Model3DViewer{constructor(){this.loadedFiles=[],this.currentFileIndex=-1,this.scene=null,this.camera=null,this.renderer=null,this.controls=null,this.currentModel=null,this.gridHelper=null,this.axesHelper=null,this.wireframeMode=!1,this.isDarkTheme=!1,this.autoRotate=!1,this.targetCameraPosition=new THREE.Vector3,this.currentCameraPosition=new THREE.Vector3,this.isTransitioning=!1,this.modelStats={vertices:0,faces:0,volume:0,surfaceArea:0,boundingBox:{min:null,max:null}},this.init(),this.setupTheme()}init(){this.scene=new THREE.Scene,this.scene.background=new THREE.Color(16316922);const e=document.getElementById("canvas"),t=e.clientWidth/e.clientHeight;this.camera=new THREE.PerspectiveCamera(75,t,.1,1e3),this.camera.position.set(5,5,5),this.renderer=new THREE.WebGLRenderer({canvas:e,antialias:!0,preserveDrawingBuffer:!0}),this.renderer.setSize(e.clientWidth,e.clientHeight),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=THREE.PCFSoftShadowMap,this.controls=new THREE.OrbitControls(this.camera,this.renderer.domElement),this.controls.enableDamping=!0,this.controls.dampingFactor=.05,this.controls.screenSpacePanning=!1,this.controls.minDistance=1,this.controls.maxDistance=100,this.setupLighting(),this.setupGridAndAxes(),this.animate(),this.handleResize()}setupLighting(){const e=new THREE.AmbientLight(4210752,.6);this.scene.add(e);const t=new THREE.DirectionalLight(16777215,.8);t.position.set(10,10,5),t.castShadow=!0,t.shadow.mapSize.width=2048,t.shadow.mapSize.height=2048,this.scene.add(t);const i=new THREE.PointLight(16777215,.5);i.position.set(-10,-10,-5),this.scene.add(i)}setupGridAndAxes(){this.gridHelper=new THREE.GridHelper(20,20,8947848,13421772),this.scene.add(this.gridHelper),this.axesHelper=new THREE.AxesHelper(5),this.axesHelper.visible=!1,this.scene.add(this.axesHelper)}setupTheme(){const e=localStorage.getItem("theme")||"light";this.isDarkTheme="dark"===e,this.applyTheme()}toggleTheme(){this.isDarkTheme=!this.isDarkTheme,localStorage.setItem("theme",this.isDarkTheme?"dark":"light"),this.applyTheme()}applyTheme(){const e=document.getElementById("themeToggle").querySelector("i");this.isDarkTheme?(document.documentElement.setAttribute("data-theme","dark"),this.scene.background=new THREE.Color(1710618),e.className="fas fa-sun"):(document.documentElement.removeAttribute("data-theme"),this.scene.background=new THREE.Color(16316922),e.className="fas fa-moon")}handleResize(){const e=document.getElementById("canvas"),t=e.clientWidth,i=e.clientHeight;this.camera.aspect=t/i,this.camera.updateProjectionMatrix(),this.renderer.setSize(t,i)}animate(){requestAnimationFrame((()=>this.animate())),this.controls&&this.controls.update(),this.renderer.render(this.scene,this.camera)}}document.addEventListener("DOMContentLoaded",(()=>new Model3DViewer));